# 🎬 AI短剧剧本生成器

一个基于AI的短剧剧本生成工具，能将一句话创意转化为抓马、狗血、快节奏的短剧剧本片段。

## ✨ 核心特性

- 🚀 **一键生成**：输入创意，立即生成结构完整的短剧剧本
- 🎭 **抓马风格**：专门调教的Prompt，让AI写出"爽文"、"狗血"感的短剧
- 📝 **结构化输出**：自动包含【场景】【角色设定】【剧本正文】【核心反转点/爽点】
- 💬 **流式输出**：实时展示生成过程，打字机效果
- 📚 **预设模板**：内置"赘婿逆袭"、"真假千金"、"霸总追妻"等热门套路

## 🎯 适用场景

- 短剧编剧快速创作
- 抖音/快手短视频脚本
- 微短剧剧本灵感激发
- 爽文/网文场景扩写

## 📦 安装依赖

```bash
cd ai-short-drama-generator
pip install -r requirements.txt
```

## 🔧 配置说明

项目默认使用通义千问 GLM-4.7 API。

### 方法1：使用环境变量（推荐）

```bash
export DASHSCOPE_API_KEY="your-api-key-here"
```

### 方法2：直接修改代码

编辑 `generator.py` 文件，修改 API Key：

```python
API_KEY = "sk-sp-7ca5054ae83f464eb25e33a3dcc41942"  # 替换为你的API Key
```

## 🚀 运行项目

### 方式1：启动 Web 界面（推荐）

```bash
streamlit run app.py
```

浏览器会自动打开 `http://localhost:8501`

### 方式2：命令行测试

```bash
python generator.py
```

## 📝 使用方法

### Web 界面使用

1. 在输入框中描述你的短剧创意
2. 或从侧边栏选择预设模板
3. 点击"🎬 生成剧本"按钮
4. 等待AI生成剧本（流式输出可实时查看）

### 示例创意

**输入：**
```
男主是个送外卖的，在老婆的家族聚会上被丈母娘百般羞辱，要求离婚。此时本市首富突然推门进来，对着男主单膝跪地。
```

**输出示例：**
```
【场景】
豪华包厢内，气氛剑拔弩张。

【角色设定】
- 男主（林辰）：隐忍、淡定
- 丈母娘（王芳）：势利眼、尖酸刻薄
- 首富（马腾）：西装革履，满脸敬畏

【剧本正文】
*(王芳将一杯水直接泼在林辰脚边，满脸不屑)*
**王芳**（尖锐）：就你个送外卖的废物，也想赖在我们家？今天这婚你离也得离，不离也得离！

**林辰**（擦了擦水渍，冷笑）：妈，三十年河东三十年河西，你别后悔。

*(砰的一声，包厢大门被踹开，本市首富马腾急匆匆冲进来，全场震惊。马腾无视众人，径直走向林辰，扑通一声单膝跪地)*

**马腾**（声音发颤）：龙尊！百亿投资合同已备好，请您签字！

【核心反转点/爽点】
首富下跪，丈母娘的表情从嚣张瞬间变成惊恐。
```

## 🧠 Prompt 设计思路

### 1. 人设设定

```
你是一个有着十年经验的爆款微短剧金牌编剧。
你精通短剧的"爽点"设计，擅长写出夸张、狗血、快节奏、情绪拉满的剧本。
```

**目的**：让AI进入"短剧编剧"的思维模式，理解短剧的特殊语境。

### 2. 核心能力定义

定义了四个关键能力：
- **制造极端对比**：嚣张→被打脸
- **夸张化表现**：动作、对话都放大情绪
- **节奏紧凑**：每句对话都推动剧情
- **套路熟练**：逆袭、打脸、霸总等元素

**目的**：给AI明确的创作方向，避免写出平淡的对话。

### 3. 格式强制

要求严格按照以下格式输出：
- 【场景】
- 【角色设定】
- 【剧本正文】
- 【核心反转点/爽点】

**目的**：确保输出结构稳定，便于直接使用。

### 4. 写作技巧指导

```
1. 对话要口语化、带刺：多用"废物"、"滚"、"你算什么东西"等攻击性词汇
2. 动作要夸张：摔杯子、泼水、下跪、震惊到掉下巴
3. 情绪要极端：嚣张要嚣张到天上去，卑微要卑微到尘埃里
4. 反转要震撼：首富下跪、身份曝光、突然的财富展示等
```

**目的**：这是让剧本有"短剧味"的关键！明确告诉AI如何写出抓马的效果。

### 5. 参数调优

- **temperature=0.9**：提高创造性，让剧本更不可预测
- **top_p=0.95**：控制输出的多样性

**目的**：平衡创造性和稳定性。

## 📊 项目结构

```
ai-short-drama-generator/
├── app.py              # Streamlit Web 界面
├── generator.py        # 核心生成引擎
├── prompts.py          # Prompt 设计
├── requirements.txt    # 依赖列表
└── README.md          # 项目文档
```

## 🎭 预设模板说明

项目内置了5个热门短剧套路模板：

1. **赘婿逆袭**：被家族看不起的赘婿，被黑道大佬跪拜
2. **真假千金**：被抱错的假千金，归来时打脸真千金
3. **霸总追妻**：被误会的前妻，归来时成为顶级设计师
4. **豪门弃子**：被赶出家门，归来时成为百亿投资人
5. **师姐的秘密**：高冷师姐看不起的学弟，其实是顶级财阀继承人

## 🚨 常见问题

### Q: 生成的剧本不够"抓马"怎么办？
A: 尝试在创意中加入更多具体的情绪描述，例如："丈母娘当场泼茶羞辱"、"男主冷笑说三年河东三年河西"等。

### Q: 如何更换其他AI模型？
A: 编辑 `generator.py` 文件，修改 `model` 参数和 `base_url`。例如换成 OpenAI：
```python
client = OpenAI(
    api_key="your-openai-key",
    base_url="https://api.openai.com/v1"
)

# 调用时
response = client.chat.completions.create(
    model="gpt-4",  # 或其他模型
    ...
)
```

### Q: API 调用失败怎么办？
A: 检查以下几点：
1. API Key 是否正确
2. 是否有足够的调用额度
3. 网络连接是否正常
4. 查看终端错误信息

## 🎯 评估标准

- **AI表现力与提示词设计（50分）**：生成的剧本是否够"抓马"，格式是否稳定
- **工程实现（30分）**：代码是否能正常运行，是否实现流式输出
- **产品完整度与体验（20分）**：交互是否直观，README说明是否清晰

## 💡 开发提示

这个挑战的灵魂是**Prompt**！
- 别在UI上死磕，把精力集中在调教Prompt上
- 多尝试不同的创意输入，观察生成效果
- 可以让AI帮你优化Prompt

## 📄 License

MIT License

## 🎉 致谢

感谢通义千问提供强大的AI能力支持！

---

**🎬 这里的每一个剧本都"抓马"到让你上头！**